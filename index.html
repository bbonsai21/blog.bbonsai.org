<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bonsai Blog</title>
    <style>
        :root { --bg: #ffffff; --text: #1a1a1a; --accent: #777; --border: #eaeaea; }
        body { font-family: -apple-system, system-ui, sans-serif; background: var(--bg); color: var(--text); line-height: 1.7; margin: 0; }
        #container { max-width: 80%; margin: 60px auto; padding: 0 20px; }
        header { margin-bottom: 40px; padding-bottom: 20px; border-bottom: 1px solid var(--border); }
        header a { text-decoration: none; color: #0000FF; font-weight: 600; }
        .post-link { display: block; margin-bottom: 15px; text-decoration: none; color: var(--text); }
        .post-link:hover { color: var(--accent); }
        .date { color: var(--accent); font-size: 0.85rem; margin-right: 15px; font-variant-numeric: tabular-nums; }
        #content img { max-width: 100%; height: auto; border-radius: 4px; margin: 2rem 0; }
        #content a { color: var(--text); text-underline-offset: 4px; }
	::target-text { background-color: #000000; color: #fff200; }
        footer { margin-top: 80px; font-size: 0.8rem; color: var(--accent); border-top: 1px solid var(--border); padding-top: 20px; }
    </style>
</head>
<body>

<div id="container">
    <header>
        <a href="/">Bonsai</a> blog
    </header>

    <div id="content">Loading...</div>

    <footer>&copy; 2025-2035</footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>
    const posts = [ // format: { title: "...", file: "path", date: "xx/yy/zz" }
	    {title: "Hello, Internet!", file: "posts/website-functioning.md", date: "21/12/2025" }
    ];

    const contentDiv = document.getElementById('content');
    const urlParams = new URLSearchParams(window.location.search);
    const postFile = urlParams.get('post');

    if (postFile) {
        fetch(postFile + '?t=' + new Date().getTime())
            .then(res => res.text())
            .then(md => { contentDiv.innerHTML = marked.parse(md); })
            .catch(() => { contentDiv.innerHTML = "Post not found."; });
    } else {
        let html = "";
        posts.forEach(p => {
            html += `<a class="post-link" href="?post=${p.file}">
                        <span class="date">${p.date}</span> ${p.title}
                     </a>`;
        });
        contentDiv.innerHTML = html;
    }
</script>
</body>
</html>
